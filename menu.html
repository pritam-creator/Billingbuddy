<!DOCTYPE html>
<html>
<head>
  <title>Surjya Bakery Menu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<h2>Surjya Bakery - Order Now</h2>

<input type="text" id="custName" placeholder="Your Name"><br><br>
<input type="tel" id="custPhone" placeholder="Mobile Number"><br><br>

<div id="menuItems"></div>

<h3>Total: ₹<span id="total">0</span></h3>

<button onclick="placeOrder()">Place Order</button>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "YOUR_API",
  authDomain: "YOUR_DOMAIN",
  databaseURL: "YOUR_DB_URL",
  projectId: "YOUR_PROJECT",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let menu = [
  {name:"Cake", price:300},
  {name:"Bread", price:40},
  {name:"Biscuit", price:20}
];

let cart = [];

function renderMenu() {
  const box = document.getElementById("menuItems");
  box.innerHTML = "";

  menu.forEach((item,index)=>{
    box.innerHTML += `
      <div>
        ${item.name} - ₹${item.price}
        Qty: <input type="number" min="0" value="0" onchange="updateCart(${index}, this.value)">
      </div><br>
    `;
  });
}

function updateCart(index, qty) {
  qty = Number(qty);
  if(qty <= 0) {
    cart = cart.filter(c=>c.index !== index);
  } else {
    const existing = cart.find(c=>c.index === index);
    if(existing){
      existing.qty = qty;
    } else {
      cart.push({...menu[index], qty, index});
    }
  }
  calculateTotal();
}

function calculateTotal(){
  let total = 0;
  cart.forEach(c=>{
    total += c.price * c.qty;
  });
  document.getElementById("total").innerText = total;
}

function placeOrder(){

  const name = document.getElementById("custName").value;
  const phone = document.getElementById("custPhone").value;

  if(!name || !phone || cart.length===0){
    alert("Fill all details & select item");
    return;
  }

  const order = {
    customer: name,
    phone: phone,
    items: cart,
    total: document.getElementById("total").innerText,
    date: new Date().toLocaleDateString(),
    status: "new"
  };

  db.ref("orders").push(order);

  alert("Order Placed Successfully!");

  document.body.innerHTML = "<h2>Thank You! Order Received</h2>";
}

renderMenu();
</script>

</body>
</html>